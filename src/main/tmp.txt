[4mTesting integration with one seeder and one downloader...
[0m[34mTracker for puppy.jpg.torrent listening on port 8000 - escaped infohash %92%C7a%D7g%FA9%16%98p%C8%09%09D%92%BD%BA%16%D7%B7
[0m[34m
Client for puppy.jpg.torrent listening on port 6666
[0m[33m[LOCK] 6666: seeding/seed 1
[0m[33m[UNLOCK] 6666: seeding/seed 1
[0m[33m[LOCK] 6666: seeding/seed 2
[0m[33m[UNLOCK] 6666: seeding/seed 2
[0m    Starting the TCP Server...
[0m[34m
Client for puppy.jpg.torrent listening on port 6667
[0m[33m[LOCK] 6666: tracking/contactTracker 1
[0m    Starting the TCP Server...
[0m[33m[UNLOCK] 6666: tracking/contactTracker 1
[0m[33m[LOCK] 6667: tracking/contactTracker 1
[0m[33m[UNLOCK] 6667: tracking/contactTracker 1
[0m    6667: adding piece 0 to needed queue
[0m    6667: adding piece 1 to needed queue
[0m[33m[LOCK] 6667: downloading/downloadPieces 1
[0m[33m[UNLOCK] 6667: downloading/downloadPieces 1
[0m    6667: need to download piece 0
[0m    6667: want to request block, current peers map[]
[0m    6667: want to request block, current peers map[]
[0m[33m[LOCK] 6667: downloading/downloadPieces 1
[0m[33m[UNLOCK] 6667: downloading/downloadPieces 1
[0m    6666: adding piece 0 to needed queue
[0m    6666: adding piece 1 to needed queue
[0m[33m[LOCK] 6666: downloading/downloadPieces 1
[0m[33m[UNLOCK] 6666: downloading/downloadPieces 1
[0m    [2017-05-10 00:41:46.189] req -QQ6824-BpLnfgDsc2WD (ip: localhost:6666), 1 peer(s)
[0m    [2017-05-10 00:41:46.189] req -QQ6824-8F2qNfHK5a84 (ip: localhost:6667), 2 peer(s)
[0m    [resp] d8:intervali5e5:peersld2:ip9:localhost7:peer id20:-QQ6824-BpLnfgDsc2WD4:port4:6666eee
[0m    [resp] d8:intervali5e5:peersld2:ip9:localhost7:peer id20:-QQ6824-BpLnfgDsc2WD4:port4:6666ed2:ip9:localhost7:peer id20:-QQ6824-8F2qNfHK5a844:port4:6667eee
[0m[34mContacting tracker at http://localhost:8000 (2 peers)
[0m[34mContacting tracker at http://localhost:8000 (1 peers)
[0m[33m[LOCK] 6667: tracking/contactTracker 2
[0m[33m[LOCK] 6666: tracking/contactTracker 2
[0m[33m[UNLOCK] 6666: tracking/contactTracker 2
[0m[33m[UNLOCK] 6667: tracking/contactTracker 2
[0m    6666: peerId -QQ6824-BpLnfgDsc2WD, ip localhost, port 6666
[0m    6667: peerId -QQ6824-BpLnfgDsc2WD, ip localhost, port 6666
[0m[33m[LOCK] 6666: tracking/trackerHeartbeat
[0m[33m[UNLOCK] 6666: tracking/trackerHeartbeat
[0m    6667: sending initial message to 127.0.0.1:6666
[0m[33m[LOCK] 6667: peering/sendPeerMessage
[0m[33m[UNLOCK] 6667: peering/sendPeerMessage
[0m    Sending Handshake
[0m[34mDialing: 127.0.0.1:6666
[0m    Enqueuing bitfield message [false false]
[0m[33m[LOCK] 6667: peering/setup peer connnections 0
[0m[33m[UNLOCK] 6667: peering/setup peer connnections 0
[0m[33m[LOCK] 6667: peering/sendPeerMessage
[0m    6667: peerId -QQ6824-8F2qNfHK5a84, ip localhost, port 6667
[0m    Received message from msgqueue - Type: 5
[0mConnection Alive!
[0m    ~~~ Got a connection! ~~~
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 5
[0m    Reading Message from:127.0.0.1:6666
[0m    Reading Handshake from: 127.0.0.1:57155
[0mSent message type: 5, to: 127.0.0.1:6666
[0m    Received message from msgqueue - Type: 0
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 0
[0mSent message type: 0, to: 127.0.0.1:6666
[0m    Finished Handshake from: 127.0.0.1:57155
[0m    Enqueuing bitfield message [true true]
[0m[33m[LOCK] 6666: peering/setup peer connnections 0
[0m[33m[UNLOCK] 6666: peering/setup peer connnections 0
[0mConnection Alive!
[0m    ~~~ Got a connection! ~~~
[0m    Reading Message from:127.0.0.1:57155
[0m    Received message from msgqueue - Type: 5
[0m    Sending encoded message from: 127.0.0.1:6666, to: 127.0.0.1:57155, type: 5
[0m    Finished Reading Message from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:57155
[0mSent message type: 5, to: 127.0.0.1:57155
[0m    Reading Message from:127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:6666
[0m    Decoding bitfield message[0m    Received PeerMessage, type: 5, from: 127.0.0.1:6666
[0m    Reading Message from:127.0.0.1:6666
[0m[33m[LOCK] 6667: tracking/trackerHeartbeat
[0m[33m[LOCK] 6666: downloading/downloadPieces 2
[0m[33m[UNLOCK] 6666: downloading/downloadPieces 2
[0m[33m[LOCK] 6666: downloading/downloadPieces 1
[0m[33m[LOCK] 6667: downloading/downloadPieces 2
[0m[33m[UNLOCK] 6666: downloading/downloadPieces 1
[0m[33m[LOCK] 6666: downloading/downloadPieces 2
[0m[33m[UNLOCK] 6666: downloading/downloadPieces 2
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 0
[0m    Sending encoded message from: 127.0.0.1:6666, to: 127.0.0.1:57155, type: 0
[0mSent message type: 0, to: 127.0.0.1:6666
[0mSent message type: 0, to: 127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:57155
[0m    Reading Message from:127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:6666
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:6666
[0m    Reading Message from:127.0.0.1:6666
[0m    Sending encoded message from: 127.0.0.1:6666, to: 127.0.0.1:57155, type: 0
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 0
[0mSent message type: 0, to: 127.0.0.1:57155
[0mSent message type: 0, to: 127.0.0.1:6666
[0m    Finished Reading Message from: 127.0.0.1:6666
[0m    Finished Reading Message from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:6666
[0m    Reading Message from:127.0.0.1:57155
[0m    Reading Message from:127.0.0.1:6666
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 0
[0m    Sending encoded message from: 127.0.0.1:6666, to: 127.0.0.1:57155, type: 0
[0mSent message type: 0, to: 127.0.0.1:6666
[0mSent message type: 0, to: 127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:57155
[0m    Reading Message from:127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:6666
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:6666
[0m    Reading Message from:127.0.0.1:6666
[0m    Sending encoded message from: 127.0.0.1:57155, to: 127.0.0.1:6666, type: 0
[0m    Sending encoded message from: 127.0.0.1:6666, to: 127.0.0.1:57155, type: 0
[0mSent message type: 0, to: 127.0.0.1:6666
[0mSent message type: 0, to: 127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:57155
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:57155
[0m    Reading Message from:127.0.0.1:57155
[0m    Finished Reading Message from: 127.0.0.1:6666
[0m    Received PeerMessage, type: 0, from: 127.0.0.1:6666
[0m    Reading Message from:127.0.0.1:6666
[0m[31m[ERROR] Client has 0 pieces but expected 2 pieces
[0m--- FAIL: TestTwoClients (5.00s)
FAIL
FAIL	command-line-arguments	5.015s
